# **Lab - Configure Router-on-a-Stick Inter-VLAN Routing**



### Topology

![Топология](https://github.com/darkmikos/otus.ru/blob/master/lab02/topology.png)

Рисунок 1

### Connection diagram



![connection diagram](https://github.com/darkmikos/otus.ru/blob/master/lab02/connection_diagram_pt.png)

Рисунок 2

### Таблица ip адресации:

Табица 1

| Device | Interface | IP Address   | Subnet Mask   | Default Gateway |
| ------ | --------- | ------------ | ------------- | --------------- |
| R1     | G0/0/1.3  | 192.168.3.1  | 255.255.255.0 | N/A             |
|        | G0/0/1.4  | 192.168.4.1  | 255.255.255.0 | N/A             |
|        | G0/0/1.8  | N/A          | N/A           | N/A             |
| S1     | VLAN 3    | 192.168.3.11 | 255.255.255.0 | 192.168.3.1     |
| S2     | VLAN 3    | 192.168.3.12 | 255.255.255.0 | 192.168.3.1     |
| PC-A   | NIC       | 192.168.3.3  | 255.255.255.0 | 192.168.3.1     |
| PC-B   | NIC       | 192.168.4.3  | 255.255.255.0 | 192.168.4.1     |

### Таблица VLAN:

Табица 2

| VLAN | Name       | Interface Assigned            |
| ---- | ---------- | ----------------------------- |
| 3    | Management | S1: VLAN 3                    |
|      |            | S2: VLAN 3                    |
|      |            | S1: F0/6                      |
| 4    | Operations | S2: F0/18                     |
| 7    | ParkingLot | S1: F0/2-4, F0/7-24, G0/1-2   |
|      |            | S2: F0/2-17, F0/19-24, G0/1-2 |
| 8    | Native     | N/A                           |

### Задание:

Необходимо настроить оборудование и организовать сетевую связанность согласно условию лабораторной работы:

1. Создать сеть и настроить основные параметры устройства.
2. Создать VLAN и назначить порты коммутаторов.
3. Настроить транки 802.1Q между коммутаторами.
4. Настроить маршрутизацию между VLAN на роутере.
5. Проверить работоспособность сети.

### Ход выполнения:

Для выполнения лабораторной работы использовал эмулятор Cisco Packet Tracer 8.0.

### Сборка схемы лабороторной работы

Собрал схему Рисунок 1 в Cisco Packet Tracer Рисунок 2.

#### Настройка основных параметров роутера:

1. Подключился к роутеру, зашел в превилигированный режим, далее в режим конфигурации.

2. Выполнил настройку роутера R1, конфиг находится в файле  [R1.cfg](https://github.com/darkmikos/otus.ru/blob/master/lab02/R1.cfg).

#### Настройка основных параметров для каждого коммутатора:

1. Подключился к коммутаторам, зашел в превилигированный режим, далее в режим конфигурации.
2. Выполнила настройку коммутаторов S1 и S2. Конфиги соответственно   [S1.cfg](https://github.com/darkmikos/otus.ru/blob/master/lab02/S1.cfg) и   [S2.cfg](https://github.com/darkmikos/otus.ru/blob/master/lab02/S2.cfg).
3. Сохранил текущую конфигурацию в файл стартовой конфигурации.

#### Настройка компьютеров (hosts: PC-A, PC-B):

1. Настроил IP-адрес, маску подсети и шлюз по умолчанию, согласно таблице 1.

#### Создание VLAN и назначение портов коммутаторов:

1. На коммутаторе S1, S2 создал VLAN и присвоил им имена согласно таблице 2.
2. Настроил интерфейс управления и шлюз по умолчанию на каждом коммутаторе, используя информацию об IP-адресе в таблице адресации.
3. Назначил все неиспользуемые порты на обоих коммутаторах в ParkingLot VLAN, настроил их для статического режима доступа (static access mode) и отключил (shutdown).
4. При конфигурации нескольких интерфейсов с одинаковыми параметрами использовал команду interface range.
5. Назначил используемым портам соответствующей VLAN (указанные в таблице VLAN) и настроил их для статического режима доступа (static access mode).
6. Командой show vlan brief проверил, что правильно назначил VLAN на порты.

#### Настройка магистрали (trunk) 802.1Q между коммутаторами:

1. Настроил на  S1, S2 коммутаторах интерфейсы F0/1 в режим trank (switchport mode trunk).
2. Настроил на  S1, S2 коммутаторах интерфейсы F0/1 nativ vlan (switchport trunk native vlan 8).
3. Настроила, чтобы через транковые порты ходили VLAN 3,4,8/
4. Для проверки правильности настройки транковых портов использовала команду show interfaces trunk.
5. На коммутаторе S1 настроила порт F0/5 так же как и F0/1.
6. Сохранила текущую конфигурацию на обеих коммутаторах.
7. Выполнила команду show interfaces trunk для проверки транкинга.
8. Файлы с конфигурацией интерфейсов коммутаторов (S1.txt и S2.txt) находятся в папке [configs](https://github.com/wiseowl-lna/net_engineer/blob/master/labs/Lab001_VLAN/configs).

#### Вопрос:

Почему F0/5 не отображается в списке транков?

#### Ответ:

Потому, что не поднят порт со стороны роутера.

#### Настройка маршрутизации между VLAN на роутере:

1. Активировала интерфейс G0/0/1 на маршрутизаторе.
2. Настроила субинтерфейс для каждой VLAN, как указано в таблице IP-адресации. Все субинтерфейсы используют инкапсуляцию 802.1Q.
3. Включила описание субинтерфейсов.
4. Для nativ VLAV IP-адрес не назначала.
5. Чтобы проверить работоспособность субинтерфейсов использовала команду show ip interface brief.
6. Файл с конфигурацией интерфейсов роутера (R1.txt) находится в папке [configs](https://github.com/wiseowl-lna/net_engineer/blob/master/labs/Lab001_VLAN/configs).